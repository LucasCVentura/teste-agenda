(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["1d6aaf08"],{"13d7":function(o,t,a){"use strict";var s=a("8600"),i=a.n(s);i.a},"1ce9":function(o,t,a){"use strict";a.r(t);var s=function(){var o=this,t=o.$createElement,a=o._self._c||t;return a("q-layout",{staticClass:"window-height block",attrs:{view:"lHh Lpr lFf"}},[a("q-page-container",{staticClass:"page-flexbox"},[a("medi-menu",{attrs:{config:"cadastro"}}),a("main",{staticClass:"flex-grow-1",on:{keyup:function(t){return!t.type.indexOf("key")&&o._k(t.keyCode,"enter",13,t.key,"Enter")?null:o.$refs.confirm.$el.click()}}},[a("img",{staticClass:"q-mx-auto assist-center",attrs:{src:o.caminhoAssistente,alt:"Assistente"}}),a("div",{staticClass:"row"},[a("h4",{staticClass:"text-azul1 col-sm-10 col-xs-12 offset-sm-1 q-mt-lg",domProps:{innerHTML:o._s(o.$t("confirmacao.cadastroConcluido"))}}),a("q-input",{staticClass:"col-md-8 col-xs-10 offset-md-2 offset-xs-1 q-mt-lg",attrs:{maxlength:o.codMaxLength,"float-label":o.$t("confirmacao.insiraCodConf"),color:"white",inverted:"","inverted-light":""},model:{value:o.codigo,callback:function(t){o.codigo=t},expression:"codigo"}}),a("span",{ref:"step",staticClass:"col-xs-6 col-sm-4 offset-xs-3 offset-sm-4 reenviarCodigo q-mt-md q-body-2 uppercase",domProps:{innerHTML:o._s(o.$t("confirmacao.reenviarCodigo"))},on:{click:function(t){return o.reenviarCodigo()}}})],1)]),a("footer",{staticClass:"row"},[a("q-btn",{ref:"confirm",staticClass:"col-xs-6 col-sm-4 offset-xs-3 offset-sm-4 q-py-md bg-azul1 text-white",attrs:{label:o.$t("confirmacao.confirmar"),"icon-right":"fas fa-arrow-right",disabled:o.disabled,loading:o.loading},on:{click:function(t){return o.autenticarCodigo()}}})],1),a("q-modal",{attrs:{"content-classes":"bg-fundo",maximized:""},on:{show:function(t){return o.$refs.toDashboard.$el.focus()}},model:{value:o.modalConfirmacao,callback:function(t){o.modalConfirmacao=t},expression:"modalConfirmacao"}},[a("q-modal-layout",{staticClass:"layout-agenda"},[a("div",{staticClass:"page-flexbox"},[a("medi-menu",{attrs:{config:"cadastro"}}),a("main",{staticClass:"flex-grow-1"},[a("img",{staticClass:"q-mx-auto q-mb-lg assist-center",attrs:{src:o.caminhoAssistente,alt:"Assistente"}}),a("section",{staticClass:"row"},[a("div",{staticClass:"q-display-1 q-mb-sm q-mt-none text-azul1 col-10 offset-1",domProps:{innerHTML:o._s(o.$t("confirmacao.vamosAgendar"))}}),a("div",{staticClass:"q-title q-mt-none text-azul1 col-xs-12 col-sm-10 col-md-8 offset-sm-1 offset-md-2",domProps:{innerHTML:o._s(o.$t("confirmacao.acesso"))}}),a("div",{staticClass:"q-title q-mt-lg q-mb-md text-cinza1 col-xs-12 col-md-8 offset-md-2",domProps:{innerHTML:o._s(o.$t("confirmacao.agendaRequisitos"))}}),o._l(o.required,function(t,s){return a("div",{key:s,staticClass:"q-title text-secondary q-mb-xs col-xs-10 col-sm-6 col-md-5 offset-xs-1 offset-sm-3 offset-md-4 text-left"},[a("span",{staticClass:"q-ml-lg"},[a("q-icon",{attrs:{color:"secondary",name:"fas fa-check-square"}}),a("span",{staticClass:"q-ml-sm"},[o._v(o._s(t.message))])],1)])})],2)]),a("footer",[a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"text-azul1 bg-white no-shadow float-left",attrs:{size:"17px",icon:"fas fa-arrow-left",outline:"",round:""}}),a("q-btn",{ref:"toDashboard",staticClass:"q-py-md bg-azul1 text-white float-right",class:o.$q.screen.lt.md?"q-px-lg":"q-px-xl",attrs:{label:o.$t("confirmacao.agendar"),"icon-right":"fas fa-arrow-right",to:"/dashboard"}})],1)],1)])],1)],1)],1)},i=[];s._withStripped=!0;a("551c");var e=a("3156"),n=a.n(e),c=a("2f62"),r=a("dde5"),l=a("b7a0"),f=a("a1c7"),d={components:{"medi-menu":f["a"]},beforeRouteLeave:function(o,t,a){this.$store.dispatch("limparUsuario"),a()},data:function(){return{codigo:"",disabled:!0,loading:!1,confirmed:!1,modalConfirmacao:!1,codMaxLength:6,required:[{message:this.$t("confirmacao.requisito1")},{message:this.$t("confirmacao.requisito2")}]}},computed:n()({},Object(c["b"])({usuario:"usuario"}),{caminhoAssistente:function(){return this.$store.state.config.assistente}}),watch:{codigo:function(){this.codigo.length===this.codMaxLength?this.disabled=!1:this.disabled=!0}},methods:{autenticarCodigo:function(){var o=this;if(this.confirmed)this.modalConfirmacao=!0;else{this.loading=!0;var t=this.usuario.email?this.usuario.email:this.usuario.cpf;new Promise(function(a,s){Object(r["L"])(t,o.codigo,a,s)}).then(function(){var a=o.usuario.oauth;if(a.token)new Promise(function(t,s){a.id.google?Object(r["i"])(o.usuario.email,a.id.google,a.token,"Google",t,s):Object(r["i"])(o.usuario.email,a.id.facebook,a.token,"Facebook",t,s)}).then(function(t){l["a"].token=a.token,o.$store.commit("AUTENTICAR"),o.confirmed=!0,o.modalConfirmacao=!0});else{var s={login:t,senha:o.usuario.senha,block:!0};o.$store.dispatch("login",s).then(function(){o.confirmed=!0,o.modalConfirmacao=!0})}}).finally(function(){o.loading=!1})}},reenviarCodigo:function(){var o=this;this.loading=!0,new Promise(function(t,a){Object(r["K"])(o.usuario.cpf,o.usuario.email,t,a)}).then(function(){o.loading=!1}).finally(function(){o.loading=!1})}}},m=d,u=(a("13d7"),a("2877")),g=Object(u["a"])(m,s,i,!1,null,null,null);g.options.__file="codigoConfirmacao.vue";t["default"]=g.exports},8600:function(o,t,a){}}]);